<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>Glidein</title>

<script type="text/javascript">


//LOAD XML Object if it exits. 

var updated; 
var numberRows = 0;
var totalEntriesMaster;
var totalEntries; 
var totalMaster; 
var total;
var sorted = 0;
var previousSort;
var currentSort; 
var frontEnds; 
var listMade = 0; 
var frontEnd = 0;
var table; 
var select;
var nameLast;
var txt2 = new Array(1000); 
var count = 0; 
var tableMade = 0;  
var index = 0; 
var columnArray = new Array("requestIdle", "requestMax", "statusHeld", "statusIdle", "statusOther", "statusPending", "statusRunning",  "statusStageIn",
                            "statusStageOut", "statusWait", "cmGlideinIdle", "cmGlideinRunning", "cmGlideinTotal", "cmGlideinInfoAge", "cmGlideinJobsIdle", 
							 "cmGlideinJobsRunning"); 


function showErr()
{
	alert("The Glidein tool is currently only fully functional on the latest version of Firefox. We apologize for the inconvenience."); 	
	window.close(); 
}
function showTime()
{
	try
    {
		updated = updated[0].children[0].attributes[3].firstChild.nodeValue;
		document.getElementById("update").innerHTML= "XML last update:   " + updated; 	
    }
	catch(err)
	{
		showErr(); 
  	}
	
}
function sortAlphabetical()
{
	sorted = 0;
	index = -2; 
	sortSignal();  
	if(frontEnd == 0)
	{
		loadXMLDoc(); 
		return; 
	}
	loadFrontEnd(nameLast); 
}
function makeList()
{
	try
	{
		if(select)
		{
			document.getElementById('tempList').removeChild(select);
		}
		var feArry = new Array(); 
		select = document.createElement("select");
		select.setAttribute('id', 'choose'); 
		var def = document.createElement("option"); 
		defTxt = document.createTextNode("Total (Default)");
		def.setAttribute("onClick", "loadNormal()"); 
		def.appendChild(defTxt); 
		select.appendChild(def); 
	
		for(i = 0; i< frontEnds.length; i++)
		{
			if(i == 0)
			{
				feArry.push(frontEnds[i]); 
				fe = document.createElement("option"); 
				txt1 = frontEnds[i].attributes.getNamedItem("name").firstChild.data;
				feTxt = document.createTextNode(txt1);
				fe.setAttribute("onClick", "loadFrontEnd(txt1)"); 
				fe.appendChild(feTxt); 
				select.appendChild(fe); 
				continue; 	
			}
			for(j = 0; j< feArry.length; j++)
			{
				if(feArry[j].attributes.getNamedItem("name").firstChild.data == frontEnds[i].attributes.getNamedItem("name").firstChild.data)
				{
					break; 	
				}
				if( j == (feArry.length - 1) && feArry[j].attributes.getNamedItem("name").firstChild.data != frontEnds[i].attributes.getNamedItem("name").       	                firstChild.data)
				{
					feArry.push(frontEnds[i]); 
					fe = document.createElement("option"); 
					txt2[count] = frontEnds[i].attributes.getNamedItem("name").firstChild.data;
					feTxt = document.createTextNode(txt2[count]);
					fe.appendChild(feTxt);
					
					/*
					 * This part of the code is not dynamic and will be fixed. 
					 */
					if(count == 0){fe.setAttribute("onClick", "loadFrontEnd(txt2[0])"); }
					if(count == 1){fe.setAttribute("onClick", "loadFrontEnd(txt2[1])"); }
					if(count == 2){fe.setAttribute("onClick", "loadFrontEnd(txt2[2])"); }
					if(count == 3){fe.setAttribute("onClick", "loadFrontEnd(txt2[3])"); }
					if(count == 4){fe.setAttribute("onClick", "loadFrontEnd(txt2[4])"); }
					if(count == 5){fe.setAttribute("onClick", "loadFrontEnd(txt2[5])"); }
					if(count == 6){fe.setAttribute("onClick", "loadFrontEnd(txt2[6])"); }
					if(count == 7){fe.setAttribute("onClick", "loadFrontEnd(txt2[7])"); }
					if(count == 8){fe.setAttribute("onClick", "loadFrontEnd(txt2[8])"); }
					if(count == 9){fe.setAttribute("onClick", "loadFrontEnd(txt2[9])"); }
					if(count == 10){fe.setAttribute("onClick", "loadFrontEnd(txt2[10])"); }
					if(count == 11){fe.setAttribute("onClick", "loadFrontEnd(txt2[11])"); }
					if(count == 12){fe.setAttribute("onClick", "loadFrontEnd(txt2[12])"); }
					if(count == 13){fe.setAttribute("onClick", "loadFrontEnd(txt2[13])"); }
					if(count == 14){fe.setAttribute("onClick", "loadFrontEnd(txt2[14])"); }
					if(count == 15){fe.setAttribute("onClick", "loadFrontEnd(txt2[15])"); }
					if(count == 16){fe.setAttribute("onClick", "loadFrontEnd(txt2[16])"); }
					if(count == 17){fe.setAttribute("onClick", "loadFrontEnd(txt2[17])"); }
					if(count == 18){fe.setAttribute("onClick", "loadFrontEnd(txt2[18])"); }
					if(count == 19){fe.setAttribute("onClick", "loadFrontEnd(txt2[19])"); }
					if(count == 20){fe.setAttribute("onClick", "loadFrontEnd(txt2[20])"); }
					if(count == 21){fe.setAttribute("onClick", "loadFrontEnd(txt2[21])"); }
					if(count == 22){fe.setAttribute("onClick", "loadFrontEnd(txt2[22])"); }
					if(count == 23){fe.setAttribute("onClick", "loadFrontEnd(txt2[23])"); }
					if(count == 24){fe.setAttribute("onClick", "loadFrontEnd(txt2[24])"); }
					if(count == 25){fe.setAttribute("onClick", "loadFrontEnd(txt2[25])"); }
					if(count == 26){fe.setAttribute("onClick", "loadFrontEnd(txt2[26])"); }
					if(count == 27){fe.setAttribute("onClick", "loadFrontEnd(txt2[27])"); }
					if(count == 28){fe.setAttribute("onClick", "loadFrontEnd(txt2[28])"); }
					if(count == 29){fe.setAttribute("onClick", "loadFrontEnd(txt2[29])"); }
					if(count == 30){fe.setAttribute("onClick", "loadFrontEnd(txt2[30])"); }
					if(count == 31){fe.setAttribute("onClick", "loadFrontEnd(txt2[31])"); }
					
					select.appendChild(fe); 
					count++; 	
					break; 
				}
			}
		}
	
		listMade = 1;
		document.getElementById('tempList').appendChild(select);
	}
	catch(err)
	{
		showErr(); 	
	}
}
function loadFrontEnd(name)
{
	try
	{
    	nameLast = name; 
		var feEntries = new Array();
		var feTotal = new Array();
		totalEntries = totalEntriesMaster; 
		total = totalMaster; 
		tableMade = 0;   
	
		for(i = 0; i< totalEntries.length; i++)
		{
			if(totalEntries[i].children[1].childElementCount != 0)
			{
				for(j = 0; j< totalEntries[i].children[1].childElementCount ; j++)
				{
					if(totalEntries[i].children[1].children[j].attributes.getNamedItem("name").firstChild.data == name)
					{
						feEntries.push(totalEntries[i]); 
						feTotal.push(totalEntries[i].children[1].children[j]); 
					}
				}
			}
		}
		frontEnd = 1;
		sorted = 0;
		totalEntries = feEntries; 
		feTotal.push(1);
		total = feTotal;
		count = 0;
		loadXMLDoc(); 	
		}
	catch(err)
	{
		showErr(); 	
	}
}
function loadNormal()
{
	tableMade = 0; 
    frontEnd = 0; 
	sorted = 0; 
	loadXMLDoc(); 
}
function loadXMLDoc()
{
	try
	{
	if (window.XMLHttpRequest)
	{// code for IE7+, Firefox, Chrome, Opera, Safari
		xmlhttp=new XMLHttpRequest();
	}
	else
	{// code for IE6, IE5
		xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
	}
  
	//Wait for server to repply that it is ready.   
	xmlhttp.onreadystatechange=function()
	{
		if (xmlhttp.readyState==4) //If 4 it it is ready. 
    	{
			updated = xmlhttp.responseXML.documentElement.getElementsByTagName("updated"); 
			showTime(); 
			totalEntriesMaster = xmlhttp.responseXML.documentElement.getElementsByTagName("entry");
			totalMaster = xmlhttp.responseXML.documentElement.getElementsByTagName("total");     
			frontEnds = xmlhttp.responseXML.documentElement.getElementsByTagName("frontend"); 
			if(frontEnd == 0)
			{
				makeList(); 
			}
			if(sorted == 0 && frontEnd == 0)
			{
				totalEntries = xmlhttp.responseXML.documentElement.getElementsByTagName("entry");
				total = xmlhttp.responseXML.documentElement.getElementsByTagName("total");     
				totalEntriesHold = totalEntries; 
				totalHold = total; 
			} 
			numberRows = totalEntries.length; 
			if(tableMade != 1)
			{
				makeTable();				
			}
		
			document.getElementById("total").innerHTML= "View has: ("+numberRows + " Total Entries)"; 
			var table = document.getElementById("table"); //Access to the entire table

	
			//Fill in entries 
			for( i = 1; i< numberRows+1; i++)
			{
				var y = totalEntries[i-1].attributes.getNamedItem("name").firstChild.data; 
				table.rows[i].cells[0].innerHTML = i + ':&nbsp&nbsp&nbsp;' + y;
			}
		
			//fill in the for non running entries. 
			for(j = 1; j < 17 ; j++)
			{	
				for(i = 1; i< total.length; i++)
				{
					if((total[i-1].childElementCount) == 0)
					{
						//fill in everything excpet the first column with 0 if entry is not doing anything.
						table.rows[i].cells[j].innerHTML = "0";
					}	
				}
			}
			/*
		 	* Fill in requested fields. 
		 	*/
			var attCount = 0; 
			for(var counter = 1; counter <= 2; counter++)
			{
				for(var i = 1; i< total.length; i++)
				{
					if(total[i-1].childElementCount != 0)
					{
						var item = total[i-1].children[1].attributes[attCount].nodeValue;  	
						table.rows[i].cells[counter].innerHTML = item; 
					}
				}
				attCount++; 
			}
			/* 
			 * Fill in status fields.  
			 */
			 attCount = 0;
			 for(var counter = 3; counter<= 10; counter++)
			 {
				for(var i = 1; i< total.length; i++)
				{
					if(total[i-1].childElementCount != 0)
					{
						var item = total[i-1].lastElementChild.attributes[attCount].nodeValue;  	
						table.rows[i].cells[counter].innerHTML = item; 			
					}
				}
				attCount++; 
		 	}
			/* 
		 	* Fill in client monitor fields 
		 	*/
			attCount = 0; 
			for(var counter = 11; counter <= 16; counter++)
			{
				for(var i = 1; i< total.length; i++)
				{
					if(total[i-1].childElementCount != 0)
					{
						var item = total[i-1].firstElementChild.attributes[attCount].nodeValue; 	
						table.rows[i].cells[counter].innerHTML = item; 
					}
				}
				attCount++; 
			}
		}
	}
	xmlhttp.open("GET", "schedd_status.xml",true);
	xmlhttp.send(null);
	}
	catch(errr)
	{
		showErr(); 	
	}
}
function makeTable() 
{
	try{
if(table)
{
	document.getElementById('tempTable').removeChild(table);
}

var row=new Array();
var cell=new Array();

var row_num=numberRows+1; //edit this value to suit
var cell_num=17; //edit this value to suit

table = document.createElement('table');
var tBody=document.createElement('tbody');


table.setAttribute('id','table');

for(c = 0; c < row_num; c++)
{
	row[c] = document.createElement('tr');
	if(c >= 0)
	{
		row[c].setAttribute('id', 'entries'); 
		row[c].setAttribute('onmouseover', "this.bgColor='#FFFF66'");
		row[c].setAttribute('onmouseout', "this.bgColor='#EEE'"); 
	}
	

	for(k = 0; k < cell_num; k++) 
	{
		cell[k] = document.createElement('td');

		if( c == 0 && k == 0)
		{
			cont = document.createTextNode("Entry Name")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'entryName'); 
	    	cell[k].setAttribute("onClick", "sortAlphabetical()"); 			
		}
		if( c == 0 && k == 1)
		{
			cont = document.createTextNode("Requested: Idle")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'requestIdle'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('requestIdle') "); 
		}
		if( c == 0 && k == 2)
		{
			cont = document.createTextNode("Requested: Max Run")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'requestMax'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('requestMax') "); 
		}
		if( c == 0 && k == 3)
		{
			cont = document.createTextNode("Status: Held")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusHeld'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusHeld') ");
		}
		if( c == 0 && k == 4)
		{
			cont = document.createTextNode("Status: Idle")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusIdle'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusIdle') "); 
		}
		if( c == 0 && k == 5)
		{
			cont = document.createTextNode("Status: Idle Other")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusOther'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusOther') "); 
		}
		if( c == 0 && k == 6)
		{
			cont = document.createTextNode("Status: Pending")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusPending'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusPending') "); 
		}
		if( c == 0 && k == 7)
		{
			cont = document.createTextNode("Status: Running")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusRunning'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusRunning') "); 
					}
		if( c == 0 && k == 8)
		{
			cont = document.createTextNode("Status: StageIn")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusStageIn'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusStageIn') ");
		}
		if( c == 0 && k == 9)
		{
			cont = document.createTextNode("Status: StageOut")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusStageOut'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusStageOut') ");
		}
		if( c == 0 && k == 10)
		{
			cont = document.createTextNode("Status: Wait")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'statusWait'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('statusWait') ");
		}
		if( c == 0 && k == 11)
		{
			cont = document.createTextNode("Client Monitor: Glidein Idle")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'cmGlideinIdle'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('cmGlideinIdle') ");
		}
		if( c == 0 && k == 12)
		{
			cont = document.createTextNode("Client Monitor: Glidein Running")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'cmGlideinRunning'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('cmGlideinRunning') ");
		}
		if( c == 0 && k == 13)
		{
			cont = document.createTextNode("Client Monitor: Glidein Total")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'cmGlideinTotal'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('cmGlideinTotal') "); 
		}
		if( c == 0 && k == 14)
		{
			cont = document.createTextNode("Client Monitor: Info Age")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'cmGlideinInfoAge'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('cmGlideinInfoAge') "); 
		}
		if( c == 0 && k == 15)
		{
			cont = document.createTextNode("Client Monitor : Jobs Idle")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'cmGlideinJobsIdle'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('cmGlideinJobsIdle') ");
		}
		if( c == 0 && k == 16)
		{
			cont = document.createTextNode("Client Monitor : Jobs Running")
			cell[k].appendChild(cont);
			cell[k].setAttribute('id', 'cmGlideinJobsRunning'); 
		    cell[k].setAttribute("onClick", "sortTableDescending('cmGlideinJobsRunning')"); 
		}

		if( c > 0 )
		{
			cont = document.createTextNode(c+"")
			cell[k].appendChild(cont);
		}
		row[c].appendChild(cell[k]);
	}
	tBody.appendChild(row[c]);
	tableMade = 1;
}

table.appendChild(tBody);
document.getElementById('tempTable').appendChild(table);
	}
	catch(err)
	{
		showErr();	
	}
	
} 
function sortSignal()
{
	for(i = 0; i < 17; i++)
	{
		for(j = 0; j<= totalEntries.length; j++)
		{
			if(i != (index + 1))
			{
				table.rows[j].cells[i].bgColor = "#EEE";  
			}
		}
	}
    if(index == -2)
	{
	   return; 	
	}
	for(i = 0; i<= totalEntries.length; i++)
	{
		table.rows[i].cells[index + 1].bgColor = "#CCCCCC";    
	}
}
function sortTableAscending(column)
{

try
{
	col = column; 
	var newTotal = new Array(); 
	var newEntries = new Array();
	var i = 0; 
	var counter = 0;
	var child; 
	var att; 

	if(column == columnArray[0])
	{
		child = 1; att = 0; index = 0; sortSignal(); 
	}
	if(column == columnArray[1])
	{
		child = 1; att = 1; index = 1; sortSignal(); 
	}
	if(column == columnArray[2])
	{
		child = 2; att = 0; index = 2; sortSignal(); 
	}   
	if(column == columnArray[3])
	{
		child = 2; att = 1; index = 3; sortSignal(); 
	}  
	if(column == columnArray[4])
	{
		child = 2; att = 2; index = 4; sortSignal();
	}
	if(column == columnArray[5])
	{
		child = 2; att = 3; index = 5; sortSignal();
	} 
	if(column == columnArray[6])
	{
		child = 2; att = 4; index = 6; sortSignal();
	}
	if(column == columnArray[7])
	{
		child = 2; att = 5; index = 7; sortSignal();
	} 
	if(column == columnArray[8])
	{
		child = 2; att = 6; index = 8; sortSignal();
	}
	if(column == columnArray[9])
	{
		child = 2; att = 7; index = 9; sortSignal();
	} 
	if(column == columnArray[10])
	{
		child = 0; att = 0; index = 10; sortSignal();
	} 
	if(column == columnArray[11])
	{
		child = 0; att = 1; index = 11; sortSignal();
	} 
	if(column == columnArray[12])
	{
		child = 0; att = 2; index = 12; sortSignal();
	} 
	if(column == columnArray[13])
	{
		child = 0; att = 3; index = 13; sortSignal();
	} 
	if(column == columnArray[14])
	{
		child = 0; att = 4; index = 14; sortSignal();
	}
	if(column == columnArray[15])
	{
		child = 0; att = 5; index = 15; sortSignal();
	}


	/* Empty entries. */
	for(var i = totalEntries.length -1 ; i >= 0; i--)
	{
		if(total[i].childElementCount == 0)
		{		
			newTotal.push(total[i]); 
			newEntries.push(totalEntries[i]); 	
		}
	}

	for(var i = totalEntries.length - 1; i >= 0; i--)
	{	
		if(total[i].childElementCount != 0)
		{
			if(parseInt(total[i].children[child].attributes[att].nodeValue) == 0)
			{
				newTotal.push(total[i]); 
				newEntries.push(totalEntries[i]); 
			}
		}
	}

	for(var i = 0; i< totalEntries.length; i++)
	{
		if(total[i].childElementCount != 0)
		{
		   if(total[i].children[child].attributes[att].nodeValue > 0)
		   {
			   newTotal.push(total[i]); 
			   newEntries.push(totalEntries[i]); 
		   }	
		}
	}	
	for(var i=0; i< newTotal.length - 1; i++)    // element to be compared
	{
  	  for(var j = i+1; j < newTotal.length; j++)   // rest of the elements
  	  {
			if(newTotal[i].childElementCount != 0)
			{
				if (parseInt(newTotal[i].children[child].attributes[att].nodeValue) > parseInt(newTotal[j].children[child].attributes[att].nodeValue))          // descending order
        		{
            		temp = newTotal[i];              // swap
					newTotal[i] = newTotal[j];
            		newTotal[j] = temp;
					temp = newEntries[i];            // swap
					newEntries[i] = newEntries[j];
            		newEntries[j] = temp;
        		}
			}
		}
	}

	currentSort = "ascending"; 
	newTotal.push(1);
	previousSort = column;
	total = newTotal; 
	totalEntries = newEntries; 
	sorted = 1; 
	loadXMLDoc();
}
catch(err)
{
	showErr(); 
}


}

function sortTableDescending(column)
{
	
	
col = column; 
if(previousSort != column)
{
	sorted = 0; 
}
if(sorted == 1 && currentSort != "ascending")
{
	sorted = 0; 
 	sortTableAscending(column); //replace sortTableDescending(column) 
    return; 
}

var newTotal = new Array(); 
var newEntries = new Array();
var i = 0; 
var counter = 0;
var child; 
var att; 

	if(column == columnArray[0])
	{
		child = 1; att = 0; index = 0; sortSignal(); 
	}
	if(column == columnArray[1])
	{
		child = 1; att = 1; index = 1; sortSignal(); 
	}
	if(column == columnArray[2])
	{
		child = 2; att = 0; index = 2; sortSignal(); 
	}   
	if(column == columnArray[3])
	{
		child = 2; att = 1; index = 3; sortSignal(); 
	}  
	if(column == columnArray[4])
	{
		child = 2; att = 2; index = 4; sortSignal();
	}
	if(column == columnArray[5])
	{
		child = 2; att = 3; index = 5; sortSignal();
	} 
	if(column == columnArray[6])
	{
		child = 2; att = 4; index = 6; sortSignal();
	}
	if(column == columnArray[7])
	{
		child = 2; att = 5; index = 7; sortSignal();
	} 
	if(column == columnArray[8])
	{
		child = 2; att = 6; index = 8; sortSignal();
	}
	if(column == columnArray[9])
	{
		child = 2; att = 7; index = 9; sortSignal();
	} 
	if(column == columnArray[10])
	{
		child = 0; att = 0; index = 10; sortSignal();
	} 
	if(column == columnArray[11])
	{
		child = 0; att = 1; index = 11; sortSignal();
	} 
	if(column == columnArray[12])
	{
		child = 0; att = 2; index = 12; sortSignal();
	} 
	if(column == columnArray[13])
	{
		child = 0; att = 3; index = 13; sortSignal();
	} 
	if(column == columnArray[14])
	{
		child = 0; att = 4; index = 14; sortSignal();
	}
	if(column == columnArray[15])
	{
		child = 0; att = 5; index = 15; sortSignal();
	}

for(var i = 0; i< totalEntries.length; i++)
{
	if(total[i].childElementCount != 0)
	{
	   if(total[i].children[child].attributes[att].nodeValue > 0)
	   {
		   newTotal.push(total[i]); 
		   newEntries.push(totalEntries[i]); 
	   }	
	}
}	
for(var i=0; i< newTotal.length - 1; i++)    // element to be compared
{
    for(var j = i+1; j < newTotal.length; j++)   // rest of the elements
    {
		if (parseInt(newTotal[i].children[child].attributes[att].nodeValue) < parseInt(newTotal[j].children[child].attributes[att].nodeValue))          // descending order
        {
            temp = newTotal[i];              // swap
			newTotal[i] = newTotal[j];
            newTotal[j] = temp;
			temp = newEntries[i];            // swap
			newEntries[i] = newEntries[j];
            newEntries[j] = temp;
        }
	}
}
for(var i = totalEntries.length - 1; i >= 0; i--)
{	
	if(total[i].childElementCount != 0)
	{
		if(parseInt(total[i].children[child].attributes[att].nodeValue) == 0)
		{
			newTotal.push(total[i]); 
			newEntries.push(totalEntries[i]); 
		}
	}
}	
/* Empty entries. */
for(var i = totalEntries.length -1 ; i >= 0; i--)
{
	if(total[i].childElementCount == 0)
	{		
		newTotal.push(total[i]); 
		newEntries.push(totalEntries[i]); 	
	}
}


currentSort = "descending";
newTotal.push(1);
previousSort = column; 
total = newTotal; 
totalEntries = newEntries; 
sorted = 1; 
loadXMLDoc(); 

	
}

</script>
<style = "text/css">

td
{
	border: 2px solid #BBB; 
	border-width: thin;
	padding:5px;
	font-size:12px;
}
#title
{
	color: #000; 	
	font: bold 330%/100% "Times New Roman";
	text-decoration:none;
	left:50%; 
}
#entries
{
	  font-weight: bold;  
}
#table
{
	background-color:#EEE;
}
#total
{
	color:#D00;
}
#button
{
   font-family:Lucida Console,monospace;   font-weight:bold;
   text-decoration:underline;
   color: #330000;
   width: 110px;
}
#choose 
{
	margin-left:auto;
	margin-right:auto;
	margin: 0;
	padding: 0;
	width: 170px;
}
#update
{
	text-align:right;
}
#current
{
	color:#300;
	font-size:12px;
	font-weight:bold;
}
#update
{
	color: #303;
	font-size:13px;
}
</style>

</head>
<body>
<script type = "text/javascript"> loadXMLDoc() </script>
<a id = "title"  style="font-size:40px" > Glidein Factory Status </a>
<h5 id = "total">(Total Entries)</h5>

<div id = "current">Select a view: </div>

<div id = "tempList"></div>
<br /><br /><br /><br />

<form onclick="loadNormal()"> <input id = "button" type="button" value="Update Table" /> </form>
<div id = "update"> XML Last update: </div> 

<div id ="tempTable"></div> 
<div id ="error"> </div>


</body>
</html>
<html><body></body></html>