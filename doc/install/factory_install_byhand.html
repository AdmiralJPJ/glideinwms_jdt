<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<head>

<style>
BODY, P, DIV, H1, H2, H3, H4, H5, H6, ADDRESS, OL, UL, TITLE, TD, OPTION, SELECT {
 font-family: Verdana;
 
}

BODY, P, DIV, ADDRESS, OL, UL, LI, TITLE, TD, OPTION, SELECT {  
  font-size: 10.0pt;
  margin-top:0pt;  
  margin-bottom:0pt;  
} 

BODY, P {
  margin-left:0pt; 
  margin-right:0pt;
}

BODY {
  line-height: ;
  background: white;
  margin: 6px;
  padding: 0px;
}

h6 { font-size: 10pt }
h5 { font-size: 11pt }
h4 { font-size: 12pt }
h3 { font-size: 13pt }
h2 { font-size: 14pt }
h1 { font-size: 16pt }

blockquote {padding: 10px; border: 1px #DDDDDD dashed }

a img {border: 0}

</style>




</head>


<body revision="dmqrsvn_22fdvtv4:222">

<h1>
  Installation of the WMS Collector and collocated glidein Factory - By hand
</h1>
<h2>
  1. Description
</h2>
The glidein Factory node will be the
<a href=http://www.cs.wisc.edu/condor/manual/v6.9/3_1Introduction.html#SECTION00411000000000000000 title="Condor manual">Condor
Central Manager</a> for the WMS,&nbsp; i.e. it&nbsp; will run the Condor
Collector and Negotiator daemons, but it will also act as a
<a href=http://www.cs.wisc.edu/condor/manual/v6.9/3_1Introduction.html#SECTION00411000000000000000 title="Condor manual">Condor
Submit node</a> for the glidein factory, running Condor schedds used for Grid
submission.<br>
On top of that, this node also hosts the glidein factory daemons.<br>
<h2>
  2. Hardware requirements
</h2>
This machine needs <span style=FONT-WEIGHT:bold>one or two CPUs</span> (one for
the Condor damons, and one for the glidein factory daemons) and a moderate
amount of <span style=FONT-WEIGHT:bold>memory</span>
(<span style=FONT-WEIGHT:bold>512MB</span> should be enough).<br>
It must must be on the <span style=FONT-WEIGHT:bold>public internet</span>, with
<span style=FONT-WEIGHT:bold>at least one port open to the world</span>; all
worker nodes will load data from this node trough HTTP.<br>
The <span style=FONT-WEIGHT:bold>disk</span> needed is just for binaries, config
files and log files (<span style=FONT-WEIGHT:bold>10GB</span> should be enough)<br>
<h2>
  3. Needed software
</h2>
A reasonably recent Linux OS (SL4 used at press time).<br>
The
<a href=https://twiki.grid.iu.edu/twiki/bin/view/Documentation/WebHome title="OSG User Web page">OSG
client software</a>.<br>
A HTTP server, like
<a href=http://www.apache.org/ title="Apache Home Page">Apache</a> or
<a href=http://www.stllinux.org/meeting_notes/2001/0719/tux/intro.html title="Tux Introduction Page">TUX</a>.<br>
A <a href=http://www.postgresql.org/ title="PostgreSQL Hoe Page">PostgreSQL
server</a>.<br>
The
<a href=http://www.cs.wisc.edu/condor/downloads/ title="Condor download page">Condor
distribution</a>.<br>
The <a href=http://oss.oetiker.ch/rrdtool/ title="RRDTool Home Page">RRDTool
package</a>.<br>
The
<a href=http://home.fnal.gov/%7Esfiligoi/glideinWMS/ title="glideinWMS home page">glideinWMS
software</a>.<br>
<h2>
  4. Base tools installation instructions
</h2>
The installation will assume you install Condor v6.9.2 from tarballs, as root.<br>
The install directory will be
<span style=FONT-WEIGHT:bold>/opt/glidecondor</span>, the working directory is
<span style=FONT-WEIGHT:bold>/opt/glidecondor/condor_local</span> and the
machine name is <span style=FONT-WEIGHT:bold>wmsmachine.fnal.gov</span>.<br>
The HTTP documents are assumed to be located in
<span style=FONT-WEIGHT:bold>/var/www/html</span>.<br>
<br>
If you want to use a different setup, make the necessary changes.<br>
<h3>
  4.1 Install a HTTP server
</h3>
Most Linux distributions come with Apache RPMs.<br>
On SL4,&nbsp; issue:<br>
<div style=MARGIN-LEFT:40px>
  yum install httpd<br>
</div>
<br>
If you are behind a firewall, you will need to set
<span style=FONT-WEIGHT:bold>Listen</span> in
<span style=FONT-WEIGHT:bold>/etc/httpd/conf/httpd.conf,</span> to an open port,
like:<br>
<div style=MARGIN-LEFT:40px>
  Listen <span style=FONT-WEIGHT:bold>8256</span><br>
</div>
<h3>
  4.2 Install RRDTool
</h3>
Unfortunatelly, most Linux distributions don't come with a RRDTool RPM
avaialble.<br>
<br>
There are RPMs for various Linux distributions on
<a href=http://dag.wieers.com/rpm/packages/rrdtool/ title="Linux RRDTool RPM Repository">http://dag.wieers.com/rpm/packages/rrdtool/</a>.<br>
<br>
I have installed them on my SL4 machine with:<br>
<div style=MARGIN-LEFT:40px>
  wget
  http://dag.wieers.com/rpm/packages/rrdtool/rrdtool-1.2.18-1.el4.rf.i386.rpm<br>
  wget
  http://dag.wieers.com/rpm/packages/rrdtool/perl-rrdtool-1.2.18-1.el4.rf.i386.rpm<br>
  http://dag.wieers.com/rpm/packages/rrdtool/python-rrdtool-1.2.18-1.el4.rf.i386.rpm<br>
   rpm -i rrdtool-1.2.18-1.el4.rf.i386.rpm perl-rrdtool-1.2.18-1.el4.rf.i386.rpm python-rrdtool-1.2.18-1.el4.rf.i386.rpm<br>
</div>
<h3>
  4.3 Install Condor<br>
</h3>
Follow instructions in the
<a href="condor_v6.9.2_install.html" title="Condor v6.9.2 installation document">Condor
v6.9.2 installation document</a>.<br>
<h3>
  4.4 Configure Condor GSI security
</h3>
Follow instructions in the
<a href="gsi_config.html" title="Configuring GSI security in Condor">Configuring
GSI security in Condor</a> document.<br>
<br>
The <span style=FONT-WEIGHT:bold>/opt/glidecondor/certs/grid-mapfile</span> must
be populated with the WMS pool service proxy DN, as well as the DNs of the
glidein factory and the VO frontend.<br>
Assuming the local service proxy DN is "/DC=org/DC=doegrids/OU=Service/CN=wms2",
the glidein factory has DN "/DC=org/DC=doegrids/OU=Service/CN=factory3", and you
have&nbsp; a VO frontend that use&nbsp; DN
"/DC=org/DC=doegrids/OU=Service/CN=frontend45", the grid-mapfile would contain
something like:<br>
<div style=MARGIN-LEFT:40px>
  "/DC=org/DC=doegrids/OU=Service/CN=wms2" wcondor<br>
  "/DC=org/DC=doegrids/OU=Service/CN=factory3" fcondor<br>
  "/DC=org/DC=doegrids/OU=Service/CN=frontend45" vcondor<br>
</div>
The names you specify after the DN are not important, but they must differ one
from another.<br>
<h3>
  4.5 Configure Quill<br>
</h3>
Follow the instructions in the
<a href="quill_setup.html" title="Condor Quill setup">Condor Quill
setup</a> document.<br>
<h3>
  4.6 Configure Condor-G settings
</h3>
The schedd on this machine will be used for Grid submission.<br>
<br>
Please add to
/<span style=FONT-WEIGHT:bold>opt/glidecondor/etc/condor_config</span> the
following lines:<br>
<div style=MARGIN-LEFT:40px>
  ###############################<br>
  # Condor-G settings<br>
  ###############################<br>
  GRIDMANAGER_LOG = /tmp/GridmanagerLog.$(SCHEDD_NAME).$(USERNAME)<br>
  GRIDMANAGER_MAX_SUBMITTED_JOBS_PER_RESOURCE=2000<br>
  GRIDMANAGER_MAX_PENDING_SUBMITS_PER_RESOURCE=20<br>
  MAX_JOBS_RUNNING&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; = 2000<br>
</div>
<h3>
  4.7 Disable startd on this node
</h3>
Unless you plan to use this node for other purpuses, too, change DAEMON_LIST in
<span style=FONT-WEIGHT:bold>/opt/glidecondor/condor_local/condor_config.local</span>,
to:<br>
<div style=MARGIN-LEFT:40px>
  DAEMON_LIST&nbsp;&nbsp; = MASTER, COLLECTOR, NEGOTIATOR, SCHEDD, QUILL<br>
</div>
<h3>
  4.8 Setup multiple schedds
</h3>
You will most probably need multiple schedd, if you want to scale.<br>
Configure the schedds <span style=FONT-WEIGHT:bold>schedd_glideins1,</span>
<span style=FONT-WEIGHT:bold>schedd_glideins2,</span>
<span style=FONT-WEIGHT:bold>schedd_glideins3</span> and
<span style=FONT-WEIGHT:bold>schedd_glideins4</span> , by following the
instructions in the
<a href="multi_schedd_config.html" title="Configuring multiple Schedds in Condor">Configuring
multiple Schedds in Condor</a> document.<br>
<h3>
  4.9 Example config files
</h3>
If following the above instructions does not make you feel confident, you can
find the complete Condor config files in<br>
<a href=example-config/glide-factory/mymachine/condor_config title=example-config/glide-factory/mymachine/condor_config>example-config/glide-factory/mymachine/condor_config</a><br>
and<br>
<a href=example-config/glide-factory/mymachine/condor_config.local title=example-config/glide-factory/mymachine/condor_config>example-config/glide-factory/mymachine/condor_config.local</a>.<br>
<h2>
  5. Start base services
</h2>
If not already running, start the HTTP server with:<br>
<div style=MARGIN-LEFT:40px>
  /etc/init.d/httpd start<br>
</div>
<br>
If not already running, start PostgreSQL with:<br>
<div style=MARGIN-LEFT:40px>
  /etc/init.d/postgresql start<br>
</div>
<br>
In order to start all the schedulers, you now run several scripts. In order to
simplify your life, create <b>/opt/glidecondor/start_condor.sh</b>, contatining:<br>
<blockquote>#!/bin/bash<br>
/opt/glidecondor/sbin/condor_master<br>
sleep 1<br>
/opt/glidecondor/start_master_schedd.sh glideins1<br>
/opt/glidecondor/start_master_schedd.sh glideins2<br>
/opt/glidecondor/start_master_schedd.sh glideins3<br>
/opt/glidecondor/start_master_schedd.sh glideins4<br>
</blockquote> The same file can be downloaded from
<a href=example-config/glide-factory/start_condor.sh title=example-config/glide-factory/start_condor.sh>example-config/glide-factory/start_condor.sh</a>.<br>
<br>
After you make it executable:<br>
<blockquote>chmod a+x /opt/glidecondor/start_condor.sh<br>
</blockquote>just run the new script:<br>
<div style=MARGIN-LEFT:40px>
  /opt/glidecondor/start_condor.sh
</div>
<br>
<h2>
  6. Glidein Factory installation guide
</h2>
This document describes how to install the glidein factory found in
<a href=http://home.fnal.gov/%7Esfiligoi/glideinWMS/ title="glideinWMS Home Page">glideinWMS</a>
v1_0.<br>
The glidein factory will be installed as user
<span style=FONT-WEIGHT:bold>gfactory</span>, and the home directory will be
<span style=FONT-WEIGHT:bold>/home/gfactory</span>.<br>
It also assumes your GCB servers are located at IP addresses
<b>132.225.204.208</b> and <b>132.225.207.114</b>.<br>
If you want to use a different setup, make the necessary changes.<br>
<br>
Unless otherwise stated, all the installation is done as user gfactory.<br>
<h3>
  6.1 Create the necessary base directories
</h3>
Create the configuration base directory,
<span style=FONT-WEIGHT:bold>~/glidein_submit</span>:<br>
<div style=MARGIN-LEFT:40px>
  mkdir /home/gfactory/glidein_submit<br>
</div>
<br>
As <span style=FONT-WEIGHT:bold>root</span>, create the Web base directory
<span style=FONT-WEIGHT:bold>/var/www/html/glidefactory</span> hierarchy:<br>
<div style=MARGIN-LEFT:40px>
  mkdir /var/www/html/glidefactory<br>
  mkdir /var/www/html/glidefactory/stage<br>
  mkdir /var/www/html/glidefactory/monitor<br>
  chown -R gfactory /var/www/html/glidefactory<br>
</div>
<h3>
  6.2 Setup the GSI security
</h3>
Create and maintain the a valid x509 proxy in
<span style=FONT-WEIGHT:bold>~/.globus/x509_service_proxy</span>.
This proxy must, at any point in time, have a validity of at least the longest expected job being run by the glideinWMS (and not less than 12 hours).<br>
How you keep this proxy valid (via
<a href=http://grid.ncsa.uiuc.edu/myproxy/ title="MyProxy home page">MyProxy</a>,
<a href=http://www.kx509.org/ title="kx509 Mode Page">kx509</a>, voms-proxy-init
from a local certificate, scp from other nodes, or other methods), is beyond the
scope of this document.<br>
<br>
Setup the environment, by adding the following lines to
<span style=FONT-WEIGHT:bold>~/.bashrc</span>:<br>
<div style=MARGIN-LEFT:40px>
  VDT_BASE=/opt/vdt<br>
  export X509_CERT_DIR=$VDT_BASE/globus/TRUSTED_CA<br>
  export X509_USER_PROXY=~/.globus/x509_service_proxy<br>
</div>
(Remember to exit end reenter the shell to pick up the new environment)<br>
<br>
Make sure the DN of this proxy is put into the local
<span style=FONT-WEIGHT:bold>/opt/glidecondor/certs/grid-mapfile</span><br>
and in the grid-mapfiles of the
<a href="collector_install.html" title="glidein pool Collector">glidein pool
Collector</a> and the
<a href="schedd_install.html" title="glidein schedulers">glidein
schedulers</a>.<br>
<h3>
  6.3 Get glideinWMS binaries
</h3>
In your home directory, check&nbsp; out glideinWMS from CVS:<br>
<div style=MARGIN-LEFT:40px>
  export CVSROOT=:pserver:anonymous@cdcvs.fnal.gov:/cvs/cd_read_only<br>
  cvs co -r v1_2 glideinWMS<br>
</div>
<h3>
  6.4 Create the glidein factory configuration directory
</h3>
To configure the glidein factory, you need to create a configuration directory.<br>
The complete guide can be found in the
<a href=../manual/factory/entry.html title="Glidein Factory Configuration document">glideinWMS
documentation</a>, but below you can find a workable example.<br>
<br>
Create
<span style=FONT-WEIGHT:bold>~/glideinWMS/creation/config_examples/config_v1.xml</span>:<br>
<div style=MARGIN-LEFT:40px>
  &lt;glidein factory_name="factory1"<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; glidein_name="v1_0"<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
  schedd_name="schedd_glideins1@wmsmachine.fnal.gov,schedd_glideins2@wmsmachine.fnal.gov,schedd_glideins3@wmsmachine.fnal.gov,schedd_glideins4@wmsmachine.fnal.gov"&gt;<br>
  &nbsp;&nbsp; &lt;monitor base_dir="/var/www/html/glidefactory/monitor"/&gt;<br>
  &nbsp;&nbsp; &lt;condor base_dir="/opt/glidecondor"/&gt;<br>
  &nbsp;&nbsp; &lt;submit base_dir="/home/gfactory/glidein_submit"/&gt;<br>
  &nbsp;&nbsp; &lt;stage
  web_base_url="http://wmsmachine.fnal.gov:8256/glidefactory/stage"
  base_dir="/var/www/html/glidefactory/stage" use_symlink="True"/&gt;<br>
  &nbsp;&nbsp; &lt;attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr name="GLIDEIN_UseGCB" const="True"
  parameter="False" value="1" publish="True" type="string"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr name="GCB_ORDER" const="False"
  type="string" value="RANDOM" publish="True" parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr name="GCB_LIST" const="True"
  type="string" value="132.225.204.208,132.225.207.114" publish="False"
  parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr name="SEC_DEFAULT_ENCRYPTION"
  const="False" type="string" value="REQUIRED" publish="True"
  parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr name="Have_CREOS_Software_Version"
  const="True" type="int" value="12" publish="True" parameter="True"
  glidein_publish="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp; &lt;/attrs&gt;<br>
  &nbsp;&nbsp; &lt;files&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;file executable="False" untar="False"
  absfname="/opt/glidecondor/certs/grid-mapfile" const="False"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;file executable="True" untar="False"
  absfname="web_base/gcb_setup.sh" const="True"/&gt;<br>
  &nbsp;&nbsp; &lt;/files&gt;<br>
  &nbsp;&nbsp; &lt;entries&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;entry name="Ultralight" gridtype="gt2"
  gatekeeper="cit-gatekeeper.ultralight.org/jobmanager-condor"
  work_dir="OSG"&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr
  name="GLIDEIN_Site" const="True" type="string" value="ultralight"
  publish="True" parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/entry&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;entry name="Wisconsin" gridtype="gt2"
  gatekeeper="cmsgrid02.hep.wisc.edu/jobmanager-condor" work_dir="Condor"&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr
  name="GLIDEIN_Site" const="True" type="string" value="wisc" publish="True"
  parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/entry&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;entry name="SanDiego" gridtype="gt2"
  gatekeeper="osg-gw-2.t2.ucsd.edu/jobmanager-condor" work_dir="Condor"&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr
  name="GLIDEIN_Site" const="True" type="string" value="sdsc" publish="True"
  parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/entry&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;entry name="Nebraska" gridtype="gt2"
  gatekeeper="red.unl.edu/jobmanager-pbs" work_dir="OSG"&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr
  name="GLIDEIN_Site" const="True" type="string" value="nebraska" publish="True"
  parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/entry&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;entry name="CERN" gridtype="gt2"
  gatekeeper="ce101.cern.ch/jobmanager-lcglsf" work_dir="."&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;attr
  name="GLIDEIN_Site" const="True" type="string" value="cern" publish="True"
  parameter="True"/&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/attrs&gt;<br>
  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp; &lt;/entry&gt;<br>
  &nbsp;&nbsp; &lt;/entries&gt;<br>
  &lt;/glidein&gt;<br>
</div>
The same file can be downloaded from
<a href=example-config/glide-factory/config_v1.xml title=example-config/glide-factory/config_v1.xml>example-config/glide-factory/config_v1.xml</a>.<br>
<br>
Now run <span style=FONT-WEIGHT:bold>create_glidein</span>:<br>
<div style=MARGIN-LEFT:40px>
  cd ~/glideinWMS/creation<br>
  ./create_glidein config_examples/config_v1.xml<br>
  # Output<br>
  #Created glidein 'v1_0'<br>
  #Submit files can be found in /home/gfactory/glidein_submit/glidein_v1_0<br>
  #Support files are in /var/www/html/glidefactory/stage/glidein_v1_0<br>
  #Monitoring files are in /var/www/html/glidefactory/monitor/glidein_v1_0<br>
</div>
<h3>
  6.5 Start the glidein factory
</h3>
Decide which configuration directory you want to use, how often should the
glidein query the WMS collector, how often should it advertise itself, and
finally execute
<span style=FONT-WEIGHT:bold>~/glideinWMS/factory/glideFactory.py</span>.<br>
<br>
For example, if you want to use the above configuration, quesry the collector
once a minute and advertise every 5, you would run:<br>
<div style=MARGIN-LEFT:40px>
  cd ~/glideinWMS/factory/<br>
  python glideFactory.py 60 5 /home/gfactory/glidein_submit/glidein_v1_0
  &gt;/dev/null 2&gt;&amp;1 &lt;/dev/null&amp;<br>
</div>
<br>
<h2>
  7 Glidein Factory monitoring
</h2>
There are several ways to monitor the entry points of the glidein factory:<br>
<ul>
  <li>
    Using the Web monitoring<br>
  </li>
  <li>
    Using the WMS tools<br>
  </li>
  <li>
    Looking at the glidein factory log files
  </li>
  <li>
    Looking at the glidein outputs
  </li>
  <li>
    Checking the WMS collector ads<br>
  </li>
</ul>
<h3>
  7.1 Glidein factory entry Web monitoring<br>
</h3>
You can either monitor the factory as a whole, or just a single entry point.<br>
<br>
In the above example, the factory monitoring is located at<br>
<div style=MARGIN-LEFT:40px>
  http://wmsmachine.fnal.gov:8256/glidefactory/monitor/glidein_v1_0/<br>
</div>

Moreover, each entry point, has its own history on the Web.<br>
<br>
For example, the SanDiego entry can be monitored at<br>
<div style=MARGIN-LEFT:40px>
  http://wmsmachine.fnal.gov:8256/glidefactory/monitor/glidein_v1_0/entry_SanDiego/<br>
</div>
<h3>
  7.2 Glidein factory monitoring via WMS tools<br>
</h3>
You can get the equivalent of the Web page snaphot by using 
<b>~/glideinWMS/tools/wmsXMLView.py</b>:<br>
<div style=MARGIN-LEFT:40px>
  cd ~/glideinWMS/tools/<br>
  python wmsXMLView.py<br>
</div>
<h3>
  7.3 Glidein factory entry log files
</h3>
The glidein factory writes two log files per entry point
<span style=FONT-WEIGHT:bold>factory_info.YYYYMMDD.log</span> and
<span style=FONT-WEIGHT:bold>factory_err.YYYYMMDD.log</span>.<br>
<br>
In the above example, the SanDiego log files are in<br>
<div style=MARGIN-LEFT:40px>
  /home/gfactory/glidein_submit/glidein_v1_0/entry_SanDiego/log<br>
</div>
<br>
All errors are reported in the
<span style=FONT-WEIGHT:bold>factory_err.YYYYMMDD.log</span>. file, while
<span style=FONT-WEIGHT:bold>factory_info.YYYYMMDD.log </span>contains entries
about what the factory is doing.<br>
<h3>
  7.4 Glidein output
</h3>
Each glidein creates 2 files on exit;
job.<span style=FONT-WEIGHT:bold>ID</span>.out and
job.<span style=FONT-WEIGHT:bold>ID</span>.err.<br>
<br>
In the above example, the SanDiego log files are in<br>
<div style=MARGIN-LEFT:40px>
  /home/gfactory/glidein_submit/glidein_v1_0/entry_SanDiego/log<br>
</div>
<br>
Problems are usually reasonably easy to spot.<br>
<h3>
  7.5 Glidein factory ClassAds in the WMS Collector
</h3>
The glidein factory also advertises summary information in the WMS collector.<br>
<br>
Use <span style=FONT-WEIGHT:bold>condor_status</span>:<br>
<div style=MARGIN-LEFT:40px>
  condor_status -any<br>
</div>
and look for <span style=FONT-WEIGHT:bold>glidefactory</span> and
<span style=FONT-WEIGHT:bold>glidefactoryclient</span> ads.<br>
<br>
<hr size=2 width=100%><a href="index.html" title="Back to the index">Back
to the index</a><br>
<br>
<br>
<br>
<br>
<br></body>
</html>
