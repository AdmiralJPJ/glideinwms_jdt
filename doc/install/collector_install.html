<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>Installation of the glidein pool Collector</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 3.0  (Linux)">
	<META NAME="CREATED" CONTENT="20071109;16562400">
	<META NAME="CHANGED" CONTENT="20081110;10121500">
	<META NAME="Info 1" CONTENT="">
	<META NAME="Info 2" CONTENT="">
	<META NAME="Info 3" CONTENT="">
	<META NAME="Info 4" CONTENT="">
	<META NAME="CHANGEDBY" CONTENT="Igor Sfiligoi">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1>Installation of
the glidein&nbsp;pool&nbsp;Collector
</H1>
<hr>
<table>
<tr valign="center" align="center">
<td>[</td><td><a href="#description">Description</a></td>
<td>|</td><td><a href="#hardware">Hardware requirements</a></td>
<td>|</td><td><a href="#software">Needed software</a></td>
<td>|</td><td><a href="#condor">Installation instructions</a></td>
<td>]</td>
</tr>
</table>
<hr>
<TABLE CELLPADDING=2 CELLSPACING=2>
	<TR>
		<TD VALIGN=TOP>
	                <a name="description">
			<H2><FONT FACE="Bitstream Vera Serif"><FONT SIZE=4>1. Description </FONT></FONT>
			</H2>
			<P><FONT FACE="Liberation Serif"><FONT SIZE=3>The glidein pool
			Collector node will be the <A HREF="http://www.cs.wisc.edu/condor/manual/v7.0/3_1Introduction.html#SECTION00411000000000000000">Condor
			Central Manager</A> for the glidein pool, i.e. it will run the
			Condor Collector and Negotiator daemons.<BR>These daemons define
			the glidein pool; if this node dies, the pool dies with it.</FONT></FONT></P>
                        <a name="hardware">
			<H2><FONT FACE="Bitstream Vera Serif"><FONT SIZE=4>2. Hardware
			requirements </FONT></FONT>
			</H2>
			<P><FONT FACE="Liberation Serif"><FONT SIZE=3>This machine needs
			<B>one or two fast CPUs</B> (one for the Collector and one for the
			Negotiator) and a moderate amount of <B>memory</B> (<B>1GB</B>
			should be enough for most tasks; really big pools may need
			more).<BR>It must have <B>reliable network</B> connectivity and
			must be <B>on the public internet,</B> with <B>no firewalls</B>;
			all worker nodes will be continuously sending UDP packets to the
			Collector.<BR>The machine must be <B>very stable</B>; if the
			Collector dies, the glidein pool dies with it (There are Condor
			techniques to minimize this damage, but you should still try to
			choose the stablest machine you can afford.)<BR>The <B>disk</B>
			needed is just for Condor binaries and log files (<B>5GB</B>
			should be enough)</FONT></FONT></P>
		</TD>
		<TD>
			<P><IMG SRC="overview_collector.png" NAME="graphics1" ALIGN=BOTTOM BORDER=0>
						</P>
		</TD>
	</TR>
</TABLE>
<a name="software">
<H2><FONT FACE="Bitstream Vera Serif"><FONT SIZE=4>3. Needed software
</FONT></FONT>
</H2>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>Any <A HREF="http://www.cs.wisc.edu/condor/manual/v7.0/1_5Availability.html">Condor-supported
OS</A>.<BR>The <A HREF="http://www.python.org/">Python</A>
interpreter (for the installer, v2.3.4 or above)<BR>The <A HREF="https://twiki.grid.iu.edu/twiki/bin/view/Documentation/WebHome">OSG
client software</A>.<BR>The <A HREF="http://www.cs.wisc.edu/condor/downloads/">Condor
distribution</A>.</FONT></FONT></P>
<a name="condor">
<H2><FONT FACE="Bitstream Vera Serif"><FONT SIZE=4>4. Installation
instructions</FONT></FONT></H2>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>The pool Collector can
be installed either as root or as a non privileged user. Either case,
make sure that the user has access to the needed <A HREF="gsi_config.html">GSI
credentials</A>.<BR>There is no real advantage to install as root, so
non-privileged installation is recommended if installed separately.</FONT></FONT></P>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>The whole process is
managed by a install script described below. You will need to provide
a valid <A HREF="http://www.cs.wisc.edu/condor/downloads/">Condor
tarball</A>, so you may as well download it before starting the
installer.</FONT></FONT></P>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>Move into</FONT></FONT></P>
<BLOCKQUOTE><FONT FACE="Liberation Serif"><FONT SIZE=3>glideinWMS/install</FONT></FONT></BLOCKQUOTE>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>and execute</FONT></FONT></P>
<BLOCKQUOTE><FONT FACE="Liberation Serif"><FONT SIZE=3>./glideinWMS_install</FONT></FONT></BLOCKQUOTE>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>You will be presented
with this screen:</FONT></FONT></P>
<BLOCKQUOTE><FONT FACE="Liberation Serif"><FONT SIZE=3>What do you
want to install?<BR>(May select several options at one, using a ,
separated list)<BR>[1] glideinWMS Collector<BR>[2] Glidein
Factory<BR>[3] GCB<BR>[4] pool Collector<BR>[5] Schedd node<BR>[6]
Condor for VO Frontend<BR>[7] VO Frontend<BR>[8] Components</FONT></FONT></BLOCKQUOTE>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>Select <B>4</B>.</FONT></FONT></P>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>Now follow the
instructions and install all the software components. Most of the
questions should be fairly straightforward. The part that is not
completely automatic is the configuration of the GSI security; you
will need to provide the DN(s) of the glideins, the DNs of all the
submit machines and the DN of the VO frontend.</FONT></FONT></P>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3>Here a possible set of
answers is presented; your setup will probably be slightly different:</FONT></FONT></P>
<PRE STYLE="margin-left: 0.39in; margin-right: 0.39in">Do you have already a VDT installation?: (y/n) <B>n</B>
Do you want to install the full OSG VDT client?: (y/n) <B>n</B>
Do you want to install a minimal Grid VDT client?: (y/n) <B>y</B>
Where do you want the VDT installed?: [/opt/vdt] <B>/home/collector/vdt</B>
Directory '/home/collector/vdt' does not exist, should I create it?: (y/n) <B>y</B>
What pacman version should I use?: [pacman-3.26] <B>pacman-3.26</B>

What VDT cache should I use?: [http://vdt.cs.wisc.edu/vdt_1101_cache] <B>http://vdt.cs.wisc.edu/vdt_1101_cache</B>

VDT client installation tends to be very picky about the platforms it installs under
Most of the time, one needs to pretent to be one of the tested platforms
The platforms known to work are: linux-rhel-3,SL-3,linux-rhel-4,SL-4,linux-fedora-4,linux-rhel-5,SL-5
Which platform do you want to use (leave empty for autodetect): <I>enter</I>

VDT 1.10.1 installs a variety of software, each with its own license.
In order to continue, you must agree to the licenses.
You can view the licenses online at:

     http://vdt.cs.wisc.edu/licenses/1.10.1

After the installation has completed, you will also be able to
view the licenses in the &quot;licenses&quot; directory.

Do you agree to the licenses? [y/n] <B>y</B>

Where would you like to install CA files?

Choices:
        l (local) - install into $VDT_LOCATION/globus/share/certificates
        n (no)    - do not install
<B>l</B>

Where should I fetch the CAs from?: [http://software.grid.iu.edu/pacman/cadist/ca-certs-version] <B>http://software.grid.iu.edu/pacman/cadist/ca-certs-version</B>

Where do you have the Condor tarball? <B>/home/collector/Downloads/condor-7.1.3-linux-x86-rhel3-dynamic.tar.gz</B>

Where do you want to install it?: [/opt/glidecondor] <B>/home/collector/condor</B>
Directory '/home/collector/condor' does not exist, should I create it?: (y/n) <B>y</B>
Installing condor in '/home/collector/condor'

If something goes wrong with Condor, who should get email about it?: <B>troubles@my.org</B>

Do you want to split the config files between condor_config and condor_config.local?: (y/n) [y] <B>y</B>

To use the GSI security, you either need a valid GSI proxy or
a valid x509 certificate and relative key
The cert/proxy subject of Pool Collector will be added as the trusted daemon in
GSI_DAEMON_NAME in the condor configuration.
Will you be using a proxy or a cert? (proxy/cert) <B>cert</B>
Where is your certificate located?: <B>/home/collector/grid-security/servicecert.pem</B>
Where is your certificate key located?: <B>/home/collector/grid-security/servicekey.pem</B>
My DN = '/DC=org/DC=doegrids/OU=Services/CN=collector/master1.my.org'

You will most probably need other DNs in the condor grid mapfile
Please add all the DNs that can be used to connect to the
Condor daemons running on this node
The User Schedd and Glidein startd will connect to and act as client to the
Pool Collector. Subjects for these services should be in the gridmap file of
the Pool Collector

Please insert all such DNs, together with a user nickname.
An empty DN entry means you are done.
DN: <B>/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org</B>
nickname: [condor001] <B>submit</B>
Is this a trusted Condor daemon?: (y/n) <B>y</B>
DN: <B>/DC=org/DC=doegrids/OU=Services/CN=gfactory/gfactory1.my.org</B>
nickname: [condor002] <B>pilot</B>
Is this a trusted Condor daemon?: (y/n) <B>y</B>
DN: <B>/DC=org/DC=doegrids/OU=Services/CN=frontend/frontend1.my.org</B>
nickname: [condor002] <B>frontend</B>
Is this a trusted Condor daemon?: (y/n) <B>n</B>
DN: <I>enter</I>
What name would you like to use for this pool?: [My pool] <B>TestPool</B>
How many slave collectors do you want?: [10] <B>10</B></PRE>

<H2><FONT FACE="Bitstream Vera Serif"><FONT SIZE=4>5. To Start/Stop Pool Collector</FONT></FONT></H2>
Setup the environment
<div style=MARGIN-LEFT:40px>
  source /home/collector/condor/condor.sh
</div>
<br>
To start Condor run:<br>
<div style=MARGIN-LEFT:40px>
  /home/condor/sbin/condor_master<br>
</div>
<br>
You should see three processes run as user condor: condor_master,
condor_collector and condor_negotiator.<br>
<br>
The log files can be found in
<span style=FONT-WEIGHT:bold>/home/condor/condor_local/log</span>.<br>
<br>
To stop Condor run:<br>
<div style=MARGIN-LEFT:40px>
  /home/condor/sbin/condor_off -master<br>
</div>
<br>
<HR SIZE=1>
<P><FONT FACE="Liberation Serif"><FONT SIZE=3><A HREF="index.html">Back
to the index</A><BR><BR></FONT></FONT><BR><BR>
</P>
</BODY>
</HTML>
