<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>



  
  
  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">


  
  
  <title>Glidein Factory</title>
</head>


<body>



<h1>Glidein Factory</h1>



<h2>Description</h2>



A&nbsp;Glidein Factory is the glidein producing infrastructure of a <a href="../index.html">glidein&nbsp;based WMS</a>.<br>



<h2>Index</h2>



<ul>



  <li><a href="#overview">Overview</a></li>



  <li><a href="#philosophy">The Glidein Factory
philosophy</a></li>
  <li><a href="#implementation">Implementation
details</a></li>
  <li>Glidein Factory management</li>
  <li><a href="#ref">Reference</a></li>



</ul>



<h2><a name="overview"></a>Overview</h2>



The main task of the Glidein Factory is to advertise
itself,&nbsp;listen for requests
from&nbsp;<a href="../frontend/index.html">frontend
clients</a> and submit <a href="../index.html#glideins">glideins</a>.
Look at the picture
below for a schematic view.<br>



<img src="overview.png"><br>



<br>



A single glidein factory can handle multiple kinds of glideins, also
called <span style="font-weight: bold;"><a name="glidein_entry_point">glidein entry points</a></span>
(as they usually point to different Grid resources). For
each entry point, it will advertise a different class-ad. <br>



Similarly,
each request from a frontend client will affect a single entry point; a
frontend will need to advertise several requests in order to
have glideins submitted to all the desirable resources.<br>



<h2><a name="philosophy"></a>The Glidein
Factory philosophy</h2>



The main idea behind a Glidein Factory is to make the life of a VO
frontend as easy as possible. And to do that, the factory needs to
abstract as much as possible. <br>



<br>



For starters, the factory itself is the one that knows the details of
various Grid sites and properly configures the glidein entry points, so
they will run without any additional knowledge. A frontend only needs
to know that an entry point exists, and the parameters it takes.<br>



<br>



Additionally, the factory also does the submissions themselves. The
frontend just publishes that it needs some glideins &nbsp;and the
factory will start submitting them. The only handle the forntend may
want to use is the ability to regulate the rate of glideins that are sent to the
Grid site. In the current implementation, this can be acchieved by
setting the desired number of <a href="http://www.cs.wisc.edu/condor/manual/v6.8/2_6Managing_Job.html#SECTION00361000000000000000">idle
glideins</a> to be kept in the Grid queue.<br>



<br>



The <a href="../overview.png" target="_blank">typical
scenario</a> features a frontend with several (hundreds or
even thousands) of user jobs in the queue that is looking for resources
where to run them. It will fetch the factory classads, select the ones
that satisfy its needs, and advertise class-ads with requests for those
glideins. If the frontend ever runs out of user jobs, it
will advertise the fact that it does not need those glideins anymore. In
practical terms, this means asking the factory to keep exactly 0 idle
glideins in the queue.<br>



<h2><a name="implementation"></a>Implementation details</h2>



The Glidein Factory is composed of several entry points, each
advertising itself and processing the incoming requests. The factory
was thus implemented so that each entry point is run by a separate
process. In fact, a Glidein Factory is nothing more than a collection
of Glidein Factory Daemons, each representing a glidein entry point,
that share the same factory name. See the picture below for an overview.<br>

<br>



<br>



<img src="entry_points_overview.png"><br>



<br>

Each entry point resides in a different&nbsp;directory. A glidein
entry point is completely described by the files on disk, and the Glidein Factory Damon does not need
to know anything about its internals. The daemon only cares about the
list of supported parameters and the jobs submission
file; everything else is taken care by the glidein startup script.&nbsp;<br>


<br>

<h2>Glidein Factory management</h2>
To be finished...<br>
<br>
<br>



<a name="ref"></a>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">



  <tbody>



    <tr>



      <td style="width: 50%; text-align: left; vertical-align: top;">
      
      
      <h2>Repository</h2>



      
      
      <h3>CVSROOT</h3>



cvsuser@cdcvs.fnal.gov:/cvs/cd<br>



      
      
      <h2>Package(s)</h2>



glideinWMS/factory<br>



glideinWMS/creation</td>



      <td style="width: 50%; text-align: left; vertical-align: top;">
      
      
      <h2>Author(s)</h2>



Since Aug. 14th - Igor Sfiligoi (Fermilab Computing Division)</td>



    </tr>



  
  
  </tbody>
</table>



<br>



</body>
</html>
