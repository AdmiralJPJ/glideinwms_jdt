<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>

  <meta content="text/html; charset=ISO-8859-1" http-equiv="content-type">
  <title>Glidein Entry Point Creation</title>


</head>


<body>

<h1>Glidein Entry Point Creation</h1>

<h2>Description</h2>

The Glidein Entry Point creation is handled by a command line tool. The
use of this tool is described here. \<br>
<h2>Index</h2>

<ul>
  <li><a href="#name">Command name</a></li>
  <li><a href="#args_raw">Command line arguments at a glance</a></li>
  <li><a href="#args">A guide to arguments</a></li>
  <li><a href="#ref">Reference</a></li>
</ul>

<h2><a name="name"></a>Command name</h2>

The installation is performed using the command<br>

<div style="margin-left: 40px;"><span style="font-family: monospace;">create_glidein</span><br>

</div>

<br>

located in<br>

<div style="margin-left: 40px;"><span style="font-family: monospace;">glideinWMS/creation</span><br>

</div>

<br>

It will create all the needed directories and files needed by a <a href="index.html#glidein_daemons">Glidein Factory Daemon</a>.<br>
<h2><a name="args_raw"></a>Command line
arguments at a glance</h2>
The command has the following options:<br>

&nbsp;
<table style="width: 100%;" border="1" cellpadding="2" cellspacing="2">

  <tbody>

    <tr>

      <th>Switch</th>

      <th></th>

      <th>Description</th>

      <th>Default</th>

    </tr>

    <tr>

      <td>-F&nbsp;|&nbsp;-factory </td>

      <td>&lt;ID&gt; </td>

      <td>Factory name</td>

      <td>`uname -n`</td>

    </tr>

    <tr>

      <td>-n&nbsp;|&nbsp;-name </td>

      <td>&lt;ID&gt; </td>

      <td>Glidein name</td>

      <td>-&nbsp;<b>Required</b></td>

    </tr>

    <tr>

      <td>-t&nbsp;|&nbsp;-site </td>

      <td>&lt;ID&gt; </td>

      <td>Site identifier (may be different that name)</td>

      <td>&lt;NameID&gt;</td>

    </tr>

    <tr>

      <td>-g&nbsp;|&nbsp;-gatekeeper </td>

      <td>&lt;gatekeeper&gt; </td>

      <td>Grid gatekeeper/resource</td>

      <td>-&nbsp;<b>Required</b></td>

    </tr>

    <tr>

      <td>-u&nbsp;|&nbsp;-gridtype </td>

      <td>&lt;grid_type&gt; </td>

      <td>Condor Grid type</td>

      <td>"gt2"</td>

    </tr>

    <tr>

      <td>-r&nbsp;|&nbsp;-rsl </td>

      <td>&lt;RSL&gt; </td>

      <td>Globus RSL option</td>

      <td><i>None</i> - Do not set</td>

    </tr>

    <tr>

      <td>-s&nbsp;|&nbsp;-startdir </td>

      <td>&lt;path|ID&gt; </td>

      <td>Where to start the glidein, usually "OSG","Condor" or
"."</td>

      <td>"."</td>

    </tr>

    <tr>

      <td>-S&nbsp;|&nbsp;-submitbase </td>

      <td>&lt;base_dir&gt; </td>

      <td>Submit base dir</td>

      <td>$HOME</td>

    </tr>

    <tr>

      <td>-W&nbsp;|&nbsp;-stagebase </td>

      <td>&lt;base_dir&gt; </td>

      <td>Stage base dir</td>

      <td>"/var/www/html/glidestage"</td>

    </tr>

    <tr>

      <td>-L&nbsp;|&nbsp;-stagesymlink </td>

      <td>&lt;Bool&gt; </td>

      <td>Can I symlink stage dir?
      <p>There need to be two copies, one in submit and one in
stage dir.<br>

Symlinking helps maintain consistency, but does require
both to be
visible at all times.</p>

      </td>

      <td>1</td>

    </tr>

    <tr>

      <td>-C&nbsp;|&nbsp;-condorbase </td>

      <td>&lt;base_dir&gt; </td>

      <td>Condor distribution base dir</td>

      <td>From environment</td>

    </tr>

    <tr>

      <td>-w&nbsp;|&nbsp;-webdir </td>

      <td>&lt;base_url&gt; </td>

      <td>Base Web server URL</td>

      <td>"http://`uname -n`/glidestage"</td>

    </tr>

    <tr>

      <td>-p&nbsp;|&nbsp;-proxy </td>

      <td>&lt;proxy_url&gt; </td>

      <td>Squid cache to use</td>

      <td><i>None</i> - Do not use</td>

    </tr>

    <tr>

      <td>-d&nbsp;|&nbsp;-schedd </td>

      <td>&lt;ScheddName&gt; </td>

      <td>Which schedd to use</td>

      <td>"schedd_glideins@`uname -n`"</td>

    </tr>

    <tr>

      <td>-a&nbsp;|&nbsp;-attr </td>

      <td>&lt;name=val&gt; </td>

      <td>Glidein attribute.
      <p>List as many as needed. All will be used.</p>

      </td>

      <td>[] - No attributes</td>

    </tr>

    <tr>

      <td>-f&nbsp;|&nbsp;-file </td>

      <td>&lt;absname[:relname[:can_modify]]&gt; </td>

      <td>User file to ship to WN.
      <p>List as many as needed. All will be used.</p>

      </td>

      <td>[] - No attributes </td>

    </tr>

    <tr>

      <td>-c&nbsp;|&nbsp;-script </td>

      <td>&lt;absname[:relname]&gt; </td>

      <td>User script to execute on WN.
      <p>List as many as needed. All will be used.</p>

      </td>

      <td>[] - No attributes </td>

    </tr>

    <tr>

      <td>-y&nbsp;|&nbsp;-subsys </td>

      <td>&lt;absname:conf_sw:dir:out_conf[:relname]&gt; </td>

      <td>User subsytem to ship to WN.
      <p>List as many as needed. All will be used.</p>

      </td>

      <td>[] - No attributes </td>

    </tr>

    <tr>

      <td>-m&nbsp;|&nbsp;-param </td>

      <td>&lt;name=val&gt; </td>

      <td>User param.
      <p>List as many as needed. All will be used.</p>

      </td>

      <td>[] - No attributes </td>

    </tr>

  </tbody>
</table>

<br>
<h2><a name="args"></a>A guide to arguments</h2>
You definitely <span style="font-weight: bold;">need to set</span> the following arguments:<br>

<ul>
  <li><span style="font-family: monospace; font-weight: bold;">-name</span><br>
The name of the entry point. It will be used to advertise the entry point, will be define Condor glidein attribute <span style="font-family: monospace;">GLIDEIN_Name</span>, and is used also to create the directory names.<br>
    <br>
Choose a short name that describes the Grid resource it represents and append a version number (like <span style="font-family: monospace;">"fnalcms_1"</span>). It is very likely you will update the entry as times go one, and as stated in the <a href="index.html#management">Glidein Factory management section</a>, it is much easier to create a new entry point than modify an existing one.</li>
  <li><span style="font-weight: bold; font-family: monospace;">-gatekeeper</span><br>
The identifier of your Grid resource (like <span style="font-family: monospace;">"cmsitbsrv01.fnal.gov/jobmanager-condor"</span>).<br>
    <br>
    <span style="font-weight: bold; font-family: monospace;">-rsl</span> may also be needed. Please check the Grid site documentation and/or ask the Grid site administrator.<br>
    <br>
The current implementation has been tested with Globus v2 Gatekeepers
only, but if you want to test it with different Condor Grid types,
please use <span style="font-weight: bold; font-family: monospace;">-gridtype</span> (<span style="font-family: monospace;">"gt2"</span> is the default).</li>
  <li><span style="font-weight: bold; font-family: monospace;">-proxy</span><br>
If you have a Web cache you can use, you set it here (like <span style="font-family: monospace;">"cmsitbsquid002.fnal.gov:3128"</span>).<br>
    <br>
If you cannot use any Web cache server, you can skip this argument (the default is not to use caching).</li>
</ul>
You <span style="font-weight: bold;">most probably want to set</span> the following arguments, too:<br>
<ul>
  <li><span style="font-weight: bold; font-family: monospace;">-submitbase</span><br>
Where to create the entry point submit directory. The default is the user home directory.</li>
  <li><span style="font-weight: bold; font-family: monospace;">-stagedir</span> and <span style="font-weight: bold; font-family: monospace;">-webdir</span><br>
These two define where the Web server directories are located.<br>
The defaults are reasonable, but you may have different needs.</li>
  <li><span style="font-weight: bold; font-family: monospace;">-startdir</span><br>
This argument defines where the glidein should run.<br>
    <br>
Most OSG sites are known to crash if you use your starting directory to run. For those sites, it is good practice to specify <span style="font-family: monospace;">"Condor"</span> if they are running Condor as the underlying batch system, and <span style="font-family: monospace;">"OSG"</span> else.</li>
  <li><span style="font-weight: bold; font-family: monospace;">-factory</span><br>
Changing this value from the name of the machine allows you to move the factory without disrupting the system.</li>
  <li><span style="font-weight: bold; font-family: monospace;">-site</span><br>
This arguments&nbsp;defines the Condor glidein attribute <span style="font-family: monospace;">GLIDEIN_Site</span>.<br>
    <br>
Logically defining a site is useful, so that you can change entry
points but the user jobs do still known where they are running. It
defaults to the entry point name. </li>
</ul>
Some other arguments you <span style="font-weight: bold;">might want to set</span>, are:<br>
<ul>
  <li><span style="font-family: monospace; font-weight: bold;">-attr</span><br>
Attributes you want to publish.<br>
    <br>
These are used by the <a href="../frontend/index.html#match_expr">VO frontend matchmaking</a>.<br>
    <br>
Example attributes are:<br>
    <pre>'GLIDEIN_Arch="INTEL"'<br>'CMS_SiteID=23'</pre>
  </li>
  <li><span style="font-weight: bold; font-family: monospace;">-schedd</span><br>
If you want to use multiple Condor schedds or you don't like the
default name, you definitely need to set this (to something like <span style="font-family: monospace;">"myschedd@mymachine.mydomain"</span>)</li>
</ul>
<br>
The other arguments are for experts only and will be documented in future releases, once more experience is gained.<br>
<br>
So a real life example would be:<br>
<pre style="margin-left: 40px;">cd glideinWMS/creation<br>./create_glidein -name cms_1 -site fnal -gatekeeper cmsitbsrv01.fnal.gov/jobmanager-condor -proxy "cmsitbsquid002.fnal.gov:3128" \<br>    -startdir Condor -factory fnalcms \<br>    -stagedir /var/www/html/wmsglidestage/ -webdir http://cms-xen6.fnal.gov/wmsglidestage \<br>    -attr 'GLIDEIN_Arch="INTEL"' -attr 'CMS_SiteID=23' -attr 'GCCVersion="4.0.1"'</pre>
<br>
<br>



<a name="ref"></a>
<table style="text-align: left; width: 100%;" border="0" cellpadding="2" cellspacing="2">



  <tbody>



    <tr>



      <td style="width: 50%; text-align: left; vertical-align: top;">
      
      
      <h2>Repository</h2>



      
      
      <h3>CVSROOT</h3>



cvsuser@cdcvs.fnal.gov:/cvs/cd<br>



      
      
      <h2>Package(s)</h2>
glideinWMS/creation</td>



      <td style="width: 50%; text-align: left; vertical-align: top;">
      
      
      <h2>Author(s)</h2>



Since Aug. 14th - Igor Sfiligoi (Fermilab Computing Division)</td>



    </tr>



  
  
  </tbody>
</table>
<br>
<br>
<br>

</body>
</html>
