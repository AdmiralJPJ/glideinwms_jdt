<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=utf-8">
	<TITLE>The VO Frontend</TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 2.4  (Linux)">
	<META NAME="CREATED" CONTENT="0;0">
	<META NAME="CHANGEDBY" CONTENT="Igor Sfiligoi">
	<META NAME="CHANGED" CONTENT="20080909;13502500">
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<H1>The VO Frontend</H1>
<H2>Description</H2>
<P>The VO Frontend is, as the name suggests, the user interface of a
<A HREF="../index.html">glidein&nbsp;based WMS</A>.</P>
<H2>Index</H2>
<UL>
	<LI><A HREF="#overview">Overview</A> 
	<LI><A HREF="#implementation">Implementation</A> 
	<LI><A HREF="#management">The VO Frontend management</A> 
	<LI><A HREF="#run_daemon">Starting a VO Frontend Daemons</A> 
	<LI><A HREF="#ref">Reference</A> 
</UL>
<H2><A NAME="overview"></A>Overview</H2>
<P>The main task of the VO frontend is to look for user jobs and ask
the <A HREF="../factory/index.html">Glidein Factories</A> to provide
<A HREF="../index.html#glideins">glideins</A>, if needed. See the
picture below for a general overview.<BR><IMG SRC="overview.png" NAME="graphics1" ALIGN=BOTTOM WIDTH=899 HEIGHT=431 BORDER=0><BR>The
VO frontend knows nothing about the glideins or Grid sites; the only
information in has are the attributes that the various Glidein
Factories publish. This makes the life of the&nbsp;frontend much
easier, as it only has to worry about matching user job requirements
to the factory attributes.</P>
<H2><A NAME="implementation"></A>Implementation</H2>
<P>The current implementation of the VO frontend is <A HREF="http://www.python.org/">Python</A>
based, and is very simple.<BR><BR>The code is composed of 4 logical
pieces:</P>
<UL>
	<LI>a&nbsp;class that holds the Glidein Factory Ads, 
	<LI>a&nbsp;class that holds the user jobs Ads, 
	<LI>a&nbsp;matchmaking procedure,&nbsp; 
	<LI>a procedure that advertises the requests, and 
	<LI><P>the glue that links the above together. 
	</P>
</UL>
<P><A NAME="match_expr"></A>The top two classes simply contact the
appropriate Condor Collector and store the data in memory.<BR><BR>The
matchmaking procedure loops over all the <A HREF="../index.html#factory_classads">factory
ads</A> and&nbsp;counts the number of idle user jobs that match the
attributes of that particular factory entry point. <BR><BR>The
matching expression is a <A HREF="http://www.python.org/doc/">Python
expression</A>, having as inputs 
</P>
<UL>
	<LI>an object holding the job attributes, named <FONT FACE="monospace"><B>job</B></FONT>,
	and&nbsp; 
	<LI><P>an object holding the entry point attributes, named <FONT FACE="monospace"><B>glidein</B></FONT>.
		</P>
</UL>
<P>Both objects are dictionaries, with keys being attribute names,
and values being attribute values.<BR><BR>A few examples:</P>
<DL>
	<DD><PRE>job[&quot;CDFMaxHours&quot;]&lt;glidein[&quot;attrs&quot;][&quot;WMSMaxHours&quot;]
job[&quot;HasData&quot;] or (glidein[&quot;site&quot;] in string.split(job[&quot;SitesWithRequiredData&quot;]))
(job[&quot;Arch&quot;] == glidein[&quot;Arch&quot;]) and (job[&quot;gccVersion&quot;]==glidein[&quot;attrs&quot;][&quot;gccVersion&quot;])</PRE><DD><P>
	<BR>Finally, the advertise procedure loops over the counts and
	converts them into appropriate <A HREF="../index.html#frontend_classads">Condor
	Class Ads</A>.<BR><BR>The glue code is responsible of parsing the
	input parameters, loading the configuration values and loop over the
	above steps.</P></DD></DL>
<H2>
<A NAME="management"></A>The VO Frontend management</H2>
<P>The VO Frontend configuration is similar to the Glidein Factory one,
in the sense that it is a XML file that gets converted into a configuration
tree by a configuration tool.</P>
<P>Due to limited time available, the configuration options are not described
in this release. Please use the installer to create a base configuration
file, and then follow by analogy to the Glidein Factory one.</P>
<P>Next releases will document this better.</P>
<H2><A NAME="run_daemon"></A>Starting a VO Frontent Daemons</H2>
<P>Once you have the desired configuration file, move to the VO
frontend directory&nbsp; and launch the command:</P>
<DL>
	<DD><PRE>./frontend_startup start</PRE><DD>
	<BR>
	</DD>
</DL>
All the activity messages will go into
<blockquote>
	<FONT FACE="monospace">group_*/log/frontend_info.&lt;date&gt;.log</FONT>
</blockquote>
while the warnings go into
<blockquote>
	<FONT FACE="monospace">group_*/log/frontend_err.&lt;date&gt;.log</FONT><
</blockquote>
<P>
<A NAME="ref"></A>The frontend logs are deleted after a week.<BR><BR><BR><BR>
</P>
<TABLE WIDTH=100% BORDER=0 CELLPADDING=2 CELLSPACING=2>
	<TR VALIGN=TOP>
		<TD>
			<H2 ALIGN=LEFT>Repository</H2>
			<H3 ALIGN=LEFT>CVSROOT</H3>
			<P ALIGN=LEFT>cvsuser@cdcvs.fnal.gov:/cvs/cd</P>
			<H2 ALIGN=LEFT>Package(s)</H2>
			<P ALIGN=LEFT>glideinWMS/frontend</TD>
		<TD>
			<H2 ALIGN=LEFT>Author(s)</H2>
			<P ALIGN=LEFT>Since Aug. 14th - Igor Sfiligoi (Fermilab Computing
			Division)</TD>
	</TR>
</TABLE>
<P><BR><BR>
</P>
</BODY>
</HTML>
